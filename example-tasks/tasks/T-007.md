# T-007

    ```md
    Remove all imports of scripts from the `scripts/` directory within the backend,
    porting the necessary logic into `backend/app/services/`.
    
    **Problem:**
    - Backend was importing functions directly from `scripts/` using `sys.path.insert()`
    - This created circular dependency and made maintenance difficult
    - Scripts should be independent of the backend
    
    **Implemented solution:**
    1. **PFX â†’ PEM**: Created `backend/app/services/cert_utils.py` with `convert_pfx_to_pem_data()` function
       - Removed import from `scripts/extract_bb_api.py` in `credentials_service.py`
    
    2. **Emsys Extraction**: Created `backend/app/services/emsys_extraction_source.py`
       - Ported SQL query logic and payment method mapping
       - Removed import from `scripts/save_to_db.py` in `extraction_service.py`
       - Extraction now connects directly to Emsys and saves via `db_service`
    
    3. **Reconciliation**: Created `backend/app/services/reconciliation_engine.py`
       - Ported complete binary reconciliation logic
       - Ported persistence functions (create_run, create_group, create_item, etc.)
       - Removed import from `scripts/reconciliation/reconcile.py` in `reconciliation.py`
    
    4. **DB Utils**: Updated `backend/app/services/db_service.py`
       - Removed re-exports from `scripts/db_utils.py`
       - Implemented natively: `get_source_id()`, `create_extraction()`, `insert_transactions()`
       - Maintained API compatibility to not break existing code
    
    **Modified files:**
    - `backend/app/services/credentials_service.py` - Uses `cert_utils` instead of `extract_bb_api`
    - `backend/app/services/extraction_service.py` - Uses `emsys_extraction_source` instead of `save_to_db`
    - `backend/app/services/reconciliation.py` - Uses `reconciliation_engine` instead of `scripts/reconciliation`
    - `backend/app/services/db_service.py` - Implements functions natively instead of re-exporting
    - `backend/app/routers/reconciliations.py` - Adjusted for new return format
    
    **Created files:**
    - `backend/app/services/cert_utils.py` - PFX to PEM conversion
    - `backend/app/services/emsys_extraction_source.py` - Emsys extraction
    - `backend/app/services/reconciliation_engine.py` - Reconciliation engine
    
    **Verification:**
    - No `sys.path.insert()` or import from `scripts/` remaining in `backend/app/`
    - Original scripts kept intact (not deleted)
    - Backend is now completely independent of scripts
    ```